{"version":3,"file":"bundle.perlin.js","sources":["../../src/util.js","../../src/p5js/util.js","../../src/fns.js","../../src/p5js/templates.js","../../src/colours.js","../../sketches/perlin.js"],"sourcesContent":["function* enumerate(it) {\n    let i = 0\n    for (const x of it)\n        yield [i++, x]\n}\n\nfunction* range(max) {\n    let i = -1\n    while (++i < max)\n        yield i\n}\n\nfunction collect(iter) {\n    const arr = []\n    for (const element of iter)\n        arr.push(element)\n    return arr\n}\n\nexport { enumerate, range, collect }","import { enumerate, range } from \"../util\";\n\nfunction* pixelgrid(p5) {\n    const d = p5.pixelDensity()\n    const [w, h] = [p5.width * d, p5.height * d]\n    for (const [ix, x] of enumerate(range(w))) {\n        for (const [iy, y] of enumerate(range(h))) {\n            const idx = ix + iy * w;\n            yield [idx, x / d, y / d]\n        }\n    }\n}\n\nfunction setPixel(p5, idx, col) {\n    // default alpha = 255\n    p5.pixels[idx * 4 + 3] = 255\n\n    // handle grayscale\n    if (!(col instanceof Array))\n        col = [col, col, col]\n\n    // do the setting\n    col.forEach((c, i) => p5.pixels[4 * idx + i] = c)\n}\n\nexport { pixelgrid, setPixel }","function donothing() { }\nfunction dontimes(n, thing) {\n    let i = n; while (i--) thing()\n}\nfunction nthings(n, thing) {\n    return new Array(n).fill(0).map(_ => thing())\n}\n\nexport { donothing, dontimes, nthings }","import { pixelgrid, setPixel } from \"./util\";\nimport { donothing } from \"../fns\";\n\nconst pausablesketch = (setup, draw) => {\n    return new p5((p5) => {\n        let paused = false;\n\n        p5.setup = function () { setup(p5) }\n\n        p5.draw = function () {\n            if (paused)\n                p5.frameCount--\n            else\n                draw(p5)\n        }\n\n        p5.keyPressed = function () {\n            if (p5.key == \" \")\n                paused = !paused\n            if (p5.key == \"s\")\n                p5.saveCanvas(\"sketch.png\")\n        }\n    })\n}\n\nconst staticgrid = (f, setup = donothing) => {\n    return new p5((p5) => {\n        let seed = 0;\n        let paused = false;\n\n        p5.setup = function () {\n            seed++\n            paused = false;\n            console.log(`Seed: ${seed}`)\n            p5.noiseSeed(seed); p5.randomSeed(seed);\n            p5.createCanvas(p5.windowWidth, p5.windowHeight);\n            // p5.pixelDensity(1)\n            setup(p5)\n        }\n\n        p5.draw = function () {\n            if (paused) return\n\n            p5.loadPixels()\n            const tick = performance.now()\n            for (const [idx, x, y] of pixelgrid(p5)) {\n                const val = f(x, y, p5)\n                setPixel(p5, idx, val)\n            }\n            const tock = performance.now()\n            p5.updatePixels()\n\n            const duration = tock - tick\n            const calculations = p5.width * p5.height * p5.pixelDensity() ** 2\n            console.log(\"Pixels per ms:\", (calculations / duration).toFixed(0));\n            paused = true\n        }\n\n        p5.keyPressed = function () {\n            if (p5.key == \"s\")\n                p5.saveCanvas(\"sketch.png\")\n            if (p5.key == \" \")\n                p5.setup()\n        }\n    })\n\n}\n\nexport { pausablesketch, staticgrid }","const _pallettes = {\n    sea: \"#E7E0C9 #C1CFC0 #6B7AA1 #11324D\",\n    grass: \"#C3BA85 #DAD5AB #F0F0CB #FEFFE2\",\n    sunset: \"#93B5C6 #C9CCD5 #E4D8DC #FFE3E3\",\n    coffee: \"#F5E8C7 #DEBA9D #9E7777 #6F4C5B\",\n    white: \"#FFFFFF\",\n    default: \"#000000 #888888 #FFFFFF\",\n}\n\nconst torgb = (hex) => {\n    return [0, 1, 2].map(i => parseInt(hex.slice(i * 2 + 1, i * 2 + 3), 16))\n}\n\nconst pallettes = {}\nfor (const [name, colors] of Object.entries(_pallettes))\n    pallettes[name] = colors.split(\" \").map(torgb)\n\nexport { pallettes }","import { staticgrid } from \"../src/p5js/templates\";\nimport { pallettes } from \"../src/colours\";\n\nconst detail = 4\nconst falloff = 0.6\nconst scale = 0.01\nconst rapidity = 40\n\n\nfunction setup(p5) {\n    p5.noiseDetail(detail, falloff)\n}\n\nconst colours = pallettes.coffee\n\nfunction color(val) {\n    // return val * 255\n    return colours[Math.floor(val * 4)]\n}\n\nfunction f(x, y, p5) {\n    const noise = p5.noise(scale * x, scale * y)\n    const noiseofnoise = p5.noise(noise * rapidity)\n    return color(noiseofnoise)\n}\n\nstaticgrid(f, setup)\n"],"names":[],"mappings":"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"}